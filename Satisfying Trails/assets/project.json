{"extensionStorage":{"SPcamera":{"cams":["default","game"]}},"targets":[{"isStage":true,"name":"Stage","variables":{"wQrv[Kyr}iojcPCDf8Y;":["mouse vel",0],"012*k:(4FNdzVND_[qph":["Mousex",0],"9tB``aV+sN7K:QJXh1HP":["Mousey",0],"~Mh2exU]!}E`*wY?95}^":["Mousex2",0],"Bn!?5;d/%#X5[j,|^.6D":["Mousey2",0],"vtmUKBvC!_q0TC#C^M2+":["Velocity",0],"=A:8R)M2t7WXLZn:JT3y":["short?",0]},"lists":{},"broadcasts":{},"blocks":{},"comments":{"aB":{"blockId":null,"x":50,"y":50,"width":350,"height":170,"minimized":false,"text":"Configuration for https://turbowarp.org/\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n{\"framerate\":60,\"runtimeOptions\":{\"maxClones\":Infinity,\"miscLimits\":false},\"hq\":true,\"width\":700} // _twconfig_"}},"currentCostume":0,"costumes":[{"name":"backdrop1","dataFormat":"svg","assetId":"cd21514d0531fdffb22204e0ec5ed84a","md5ext":"cd21514d0531fdffb22204e0ec5ed84a.svg","rotationCenterX":240,"rotationCenterY":180}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Sprite1","variables":{"*~X6PfYEQNg~b}=JxzL:":["old mouse x",0],"$G$0D6stkBl1^5e)%@{d":["msx",104144],"x06fyYTVi[%Zw{|RpdRj":["msy",17752],"VJ@$3iy0D**|MC@k)|,P":["x",0],"7g@ZO1iuC0=h5:.edC}N":["y",0],"w5**{$(~f,gaSSPE6@eH":["camx",0],")sT{]i/]8O~#sz)fZID}":["camy",0]},"lists":{},"broadcasts":{},"blocks":{".":{"opcode":"event_whenflagclicked","next":"b","parent":null,"inputs":{},"fields":{},"topLevel":true},"r":{"opcode":"motion_gotoxy","next":"t","parent":"s","inputs":{"X":[1,[4,"0"]],"Y":[1,[4,"0"]]},"fields":{}},"t":{"opcode":"data_setvariableto","next":"u","parent":"r","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["msx","$G$0D6stkBl1^5e)%@{d"]}},"u":{"opcode":"data_setvariableto","next":"c","parent":"t","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["msy","x06fyYTVi[%Zw{|RpdRj"]}},"c":{"opcode":"looks_switchcostumeto","next":"v","parent":"u","inputs":{"COSTUME":[1,"/"]},"fields":{}},"/":{"opcode":"looks_costume","next":null,"parent":"c","inputs":{},"fields":{"COSTUME":["costume2",null]},"shadow":true},"w":{"opcode":"control_forever","next":null,"parent":"d","inputs":{"SUBSTACK":[2,"e"]},"fields":{}},"e":{"opcode":"theshovelcanvaseffects_setrendermode","next":"x","parent":"w","inputs":{"EFFECT":[1,":"]},"fields":{}},":":{"opcode":"theshovelcanvaseffects_menu_RENDERMODE","next":null,"parent":"e","inputs":{},"fields":{"RENDERMODE":["pixelated",null]},"shadow":true},"x":{"opcode":"theshovelcanvaseffects_renderscale","next":"y","parent":"e","inputs":{"X":[1,[4,"1000"]],"Y":[1,[4,"1000"]]},"fields":{}},"y":{"opcode":"looks_seteffectto","next":"f","parent":"x","inputs":{"VALUE":[1,[4,"0"]]},"fields":{"EFFECT":["GHOST",null]}},"f":{"opcode":"motion_changexby","next":"g","parent":"y","inputs":{"DX":[3,"z",[4,"10"]]},"fields":{}},"z":{"opcode":"operator_divide","next":null,"parent":"f","inputs":{"NUM1":[3,"A",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{}},"A":{"opcode":"operator_subtract","next":null,"parent":"z","inputs":{"NUM1":[3,[12,"msx","$G$0D6stkBl1^5e)%@{d"],[4,""]],"NUM2":[3,";",[4,""]]},"fields":{}},";":{"opcode":"motion_xposition","next":null,"parent":"A","inputs":{},"fields":{}},"g":{"opcode":"motion_changeyby","next":"h","parent":"f","inputs":{"DY":[3,"B",[4,"10"]]},"fields":{}},"B":{"opcode":"operator_divide","next":null,"parent":"g","inputs":{"NUM1":[3,"C",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{}},"C":{"opcode":"operator_subtract","next":null,"parent":"B","inputs":{"NUM1":[3,[12,"msy","x06fyYTVi[%Zw{|RpdRj"],[4,""]],"NUM2":[3,"=",[4,""]]},"fields":{}},"=":{"opcode":"motion_yposition","next":null,"parent":"C","inputs":{},"fields":{}},"h":{"opcode":"SPcamera_changeX","next":"D","parent":"g","inputs":{"NUM":[3,"E",[4,"10"]]},"fields":{"CAMERA":["game",null]}},"E":{"opcode":"operator_divide","next":null,"parent":"h","inputs":{"NUM1":[3,"i",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{}},"i":{"opcode":"operator_subtract","next":null,"parent":"E","inputs":{"NUM1":[3,"?",[4,""]],"NUM2":[3,"@",[4,""]]},"fields":{}},"?":{"opcode":"motion_xposition","next":null,"parent":"i","inputs":{},"fields":{}},"@":{"opcode":"SPcamera_getX","next":null,"parent":"i","inputs":{},"fields":{"CAMERA":["game",null]}},"D":{"opcode":"SPcamera_changeY","next":null,"parent":"h","inputs":{"NUM":[3,"F",[4,"10"]]},"fields":{"CAMERA":["game",null]}},"F":{"opcode":"operator_divide","next":null,"parent":"D","inputs":{"NUM1":[3,"j",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{}},"j":{"opcode":"operator_subtract","next":null,"parent":"F","inputs":{"NUM1":[3,"[",[4,""]],"NUM2":[3,"]",[4,""]]},"fields":{}},"[":{"opcode":"motion_yposition","next":null,"parent":"j","inputs":{},"fields":{}},"]":{"opcode":"SPcamera_getY","next":null,"parent":"j","inputs":{},"fields":{"CAMERA":["game",null]}},"^":{"opcode":"event_whenflagclicked","next":"G","parent":null,"inputs":{},"fields":{},"topLevel":true},"G":{"opcode":"control_forever","next":null,"parent":"^","inputs":{"SUBSTACK":[2,"k"]},"fields":{}},"k":{"opcode":"data_setvariableto","next":"_","parent":"G","inputs":{"VALUE":[3,"`",[10,"0"]]},"fields":{"VARIABLE":["old mouse x","*~X6PfYEQNg~b}=JxzL:"]}},"`":{"opcode":"sensing_mousex","next":null,"parent":"k","inputs":{},"fields":{}},"_":{"opcode":"control_wait","next":null,"parent":"k","inputs":{"DURATION":[1,[5,"0"]]},"fields":{}},"{":{"opcode":"control_start_as_clone","next":"l","parent":null,"inputs":{},"fields":{},"topLevel":true},"l":{"opcode":"looks_switchcostumeto","next":"H","parent":"{","inputs":{"COSTUME":[1,"|"]},"fields":{}},"|":{"opcode":"looks_costume","next":null,"parent":"l","inputs":{},"fields":{"COSTUME":["costume1",null]},"shadow":true},"H":{"opcode":"looks_setsizeto","next":"I","parent":"l","inputs":{"SIZE":[1,[4,"100"]]},"fields":{}},"I":{"opcode":"looks_seteffectto","next":"a","parent":"H","inputs":{"VALUE":[1,[4,"0"]]},"fields":{"EFFECT":["GHOST",null]}},"a":{"opcode":"control_if_else","next":"}","parent":"I","inputs":{"CONDITION":[2,"~"],"SUBSTACK":[2,"aa"],"SUBSTACK2":[2,"ab"]},"fields":{}},"~":{"opcode":"operator_equals","next":null,"parent":"a","inputs":{"OPERAND1":[3,[12,"short?","=A:8R)M2t7WXLZn:JT3y"],[10,""]],"OPERAND2":[1,[10,"0"]]},"fields":{}},"aa":{"opcode":"control_wait","next":null,"parent":"a","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"ab":{"opcode":"control_wait","next":null,"parent":"a","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"}":{"opcode":"control_delete_this_clone","next":null,"parent":"a","inputs":{},"fields":{}},"ac":{"opcode":"event_whenflagclicked","next":"J","parent":null,"inputs":{},"fields":{},"topLevel":true},"J":{"opcode":"control_forever","next":null,"parent":"ac","inputs":{"SUBSTACK":[2,"ad"]},"fields":{}},"ad":{"opcode":"procedures_call","next":null,"parent":"J","inputs":{},"fields":{},"mutation":{"tagName":"mutation","children":[],"proccode":"h","argumentids":"[]","warp":"true"}},"K":{"opcode":"procedures_definition","next":"L","parent":null,"inputs":{"custom_block":[1,"ae"]},"fields":{},"topLevel":true},"ae":{"opcode":"procedures_prototype","next":null,"parent":"K","inputs":{},"fields":{},"shadow":true,"mutation":{"tagName":"mutation","children":[],"proccode":"h","argumentids":"[]","argumentnames":"[]","argumentdefaults":"[]","warp":"true"}},"L":{"opcode":"control_repeat","next":null,"parent":"K","inputs":{"TIMES":[1,[6,"1"]],"SUBSTACK":[2,"M"]},"fields":{}},"M":{"opcode":"looks_changeeffectby","next":"N","parent":"L","inputs":{"CHANGE":[1,[4,"10"]]},"fields":{"EFFECT":["COLOR",null]}},"N":{"opcode":"control_create_clone_of","next":null,"parent":"M","inputs":{"CLONE_OPTION":[1,"af"]},"fields":{}},"af":{"opcode":"control_create_clone_of_menu","next":null,"parent":"N","inputs":{},"fields":{"CLONE_OPTION":["_myself_",null]},"shadow":true},"O":{"opcode":"motion_turnright","next":"m","parent":null,"inputs":{"DEGREES":[3,"P",[4,"15"]]},"fields":{},"topLevel":true},"P":{"opcode":"operator_divide","next":null,"parent":"O","inputs":{"NUM1":[3,"n",[4,""]],"NUM2":[1,[4,"2"]]},"fields":{}},"n":{"opcode":"operator_subtract","next":null,"parent":"P","inputs":{"NUM1":[3,"Q",[4,""]],"NUM2":[3,"ag",[4,""]]},"fields":{}},"Q":{"opcode":"operator_divide","next":null,"parent":"n","inputs":{"NUM1":[3,"ah",[4,""]],"NUM2":[1,[4,"4"]]},"fields":{}},"ah":{"opcode":"sensing_mousex","next":null,"parent":"Q","inputs":{},"fields":{}},"ag":{"opcode":"motion_direction","next":null,"parent":"n","inputs":{},"fields":{}},"m":{"opcode":"data_setvariableto","next":"R","parent":"O","inputs":{"VALUE":[3,"S",[10,"0"]]},"fields":{"VARIABLE":["mouse vel","wQrv[Kyr}iojcPCDf8Y;"]}},"S":{"opcode":"operator_subtract","next":null,"parent":"m","inputs":{"NUM1":[3,"ai",[4,""]],"NUM2":[3,[12,"old mouse x","*~X6PfYEQNg~b}=JxzL:"],[4,""]]},"fields":{}},"ai":{"opcode":"sensing_mousex","next":null,"parent":"S","inputs":{},"fields":{}},"R":{"opcode":"stretch_changeStretchY","next":null,"parent":"m","inputs":{"DY":[3,"T",[4,"10"]]},"fields":{}},"T":{"opcode":"operator_divide","next":null,"parent":"R","inputs":{"NUM1":[3,"o",[4,""]],"NUM2":[1,[4,"2"]]},"fields":{}},"o":{"opcode":"operator_subtract","next":null,"parent":"T","inputs":{"NUM1":[3,"U",[4,""]],"NUM2":[3,"aj",[4,""]]},"fields":{}},"U":{"opcode":"operator_add","next":null,"parent":"o","inputs":{"NUM1":[3,"ak",[4,""]],"NUM2":[1,[4,"100"]]},"fields":{}},"ak":{"opcode":"operator_multiply","next":null,"parent":"U","inputs":{"NUM1":[3,[12,"Velocity","vtmUKBvC!_q0TC#C^M2+"],[4,""]],"NUM2":[1,[4,"11"]]},"fields":{}},"aj":{"opcode":"stretch_getY","next":null,"parent":"o","inputs":{},"fields":{}},"al":{"opcode":"event_whenkeypressed","next":"am","parent":null,"inputs":{},"fields":{"KEY_OPTION":["up arrow",null]},"topLevel":true},"am":{"opcode":"SPcamera_setZoom","next":null,"parent":"al","inputs":{"NUM":[1,[4,"100"]]},"fields":{"CAMERA":["game",null]}},"an":{"opcode":"event_whenkeypressed","next":"ao","parent":null,"inputs":{},"fields":{"KEY_OPTION":["down arrow",null]},"topLevel":true},"ao":{"opcode":"SPcamera_setZoom","next":null,"parent":"an","inputs":{"NUM":[1,[4,"50"]]},"fields":{"CAMERA":["game",null]}},"ap":{"opcode":"event_whenkeypressed","next":"aq","parent":null,"inputs":{},"fields":{"KEY_OPTION":["k",null]},"topLevel":true},"aq":{"opcode":"data_setvariableto","next":null,"parent":"ap","inputs":{"VALUE":[1,[10,"1"]]},"fields":{"VARIABLE":["short?","=A:8R)M2t7WXLZn:JT3y"]}},"ar":{"opcode":"event_whenkeypressed","next":"as","parent":null,"inputs":{},"fields":{"KEY_OPTION":["j",null]},"topLevel":true},"as":{"opcode":"data_setvariableto","next":null,"parent":"ar","inputs":{"VALUE":[1,[10,"0"]]},"fields":{"VARIABLE":["short?","=A:8R)M2t7WXLZn:JT3y"]}},"aB":{"opcode":"HyperSense2SP_mouseVelocity","next":null,"parent":null,"inputs":{},"fields":{"POS":["y",null]},"topLevel":true},"at":{"opcode":"event_whenflagclicked","next":"V","parent":null,"inputs":{},"fields":{},"topLevel":true},"V":{"opcode":"control_forever","next":null,"parent":"at","inputs":{"SUBSTACK":[2,"p"]},"fields":{}},"p":{"opcode":"data_changevariableby","next":"W","parent":"V","inputs":{"VALUE":[3,"X",[4,"0"]]},"fields":{"VARIABLE":["msx","$G$0D6stkBl1^5e)%@{d"]}},"au":{"opcode":"sensing_mousex","next":null,"parent":"X","inputs":{},"fields":{}},"W":{"opcode":"data_changevariableby","next":null,"parent":"p","inputs":{"VALUE":[3,"Y",[4,"0"]]},"fields":{"VARIABLE":["msy","x06fyYTVi[%Zw{|RpdRj"]}},"av":{"opcode":"sensing_mousey","next":null,"parent":"Y","inputs":{},"fields":{}},"s":{"opcode":"control_wait","next":"r","parent":"b","inputs":{"DURATION":[1,[5,"1"]]},"fields":{}},"v":{"opcode":"SPcamera_setX","next":"Z","parent":"c","inputs":{"NUM":[1,[4,"0"]]},"fields":{"CAMERA":["game",null]}},"Z":{"opcode":"SPcamera_setY","next":"d","parent":"v","inputs":{"NUM":[1,[4,"0"]]},"fields":{"CAMERA":["default",null]}},"b":{"opcode":"pointerlock_setLocked","next":"s","parent":".","inputs":{"enabled":[1,"aw"]},"fields":{}},"aw":{"opcode":"pointerlock_menu_enabled","next":null,"parent":"b","inputs":{},"fields":{"enabled":["true",null]},"shadow":true},"d":{"opcode":"SPcamera_bindTarget","next":"w","parent":"Z","inputs":{"TARGET":[1,"ax"]},"fields":{"CAMERA":["game",null]}},"ax":{"opcode":"SPcamera_menu_OBJECTS","next":null,"parent":"d","inputs":{},"fields":{"OBJECTS":["_myself_",null]},"shadow":true},"X":{"opcode":"operator_multiply","next":null,"parent":"p","inputs":{"NUM1":[3,"au",[4,""]],"NUM2":[1,[4,"8"]]},"fields":{}},"Y":{"opcode":"operator_multiply","next":null,"parent":"W","inputs":{"NUM1":[3,"av",[4,""]],"NUM2":[1,[4,"8"]]},"fields":{}}},"comments":{},"currentCostume":1,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"f4a000bc96da90b47b45e1bda7a8f4d5","md5ext":"f4a000bc96da90b47b45e1bda7a8f4d5.svg","rotationCenterX":53.625,"rotationCenterY":56},{"name":"costume2","bitmapResolution":1,"dataFormat":"svg","assetId":"d4c33d32f1858dd6065f60f3054b07d2","md5ext":"d4c33d32f1858dd6065f60f3054b07d2.svg","rotationCenterX":53.625,"rotationCenterY":56}],"sounds":[{"name":"Low Whoosh","assetId":"63eaee10ebfa8149e7eba109477c04d0","dataFormat":"wav","format":"","rate":48000,"sampleCount":84251,"md5ext":"63eaee10ebfa8149e7eba109477c04d0.wav"}],"volume":100,"layerOrder":1,"visible":true,"x":104144.0000029387,"y":17751.99999832058,"size":100,"direction":-76.97604367854677,"draggable":false,"rotationStyle":"don't rotate"},{"isStage":false,"name":"Sprite4","variables":{},"lists":{},"broadcasts":{},"blocks":{"ay":{"opcode":"event_whenflagclicked","next":"!","parent":null,"inputs":{},"fields":{},"topLevel":true},"!":{"opcode":"control_forever","next":null,"parent":"ay","inputs":{"SUBSTACK":[2,"#"]},"fields":{}},"#":{"opcode":"text_setColor","next":"%","parent":"!","inputs":{"COLOR":[1,[9,"#000000"]]},"fields":{}},"%":{"opcode":"text_setFont","next":"(","parent":"#","inputs":{},"fields":{"FONT":["Sans Serif",null]}},"(":{"opcode":"text_setText","next":null,"parent":"%","inputs":{"TEXT":[3,"q",[10,"Welcome to my project!"]]},"fields":{}},"q":{"opcode":"operator_join","next":null,"parent":"(","inputs":{"STRING1":[3,")",[10,"apple "]],"STRING2":[3,"*",[10,"banana"]]},"fields":{}},"*":{"opcode":"operator_join","next":null,"parent":"q","inputs":{"STRING1":[1,[10," "]],"STRING2":[3,"+",[10,"banana"]]},"fields":{}},",":{"opcode":"sensing_of","next":null,"parent":")","inputs":{"OBJECT":[1,"az"]},"fields":{"PROPERTY":["msx",null]}},"az":{"opcode":"sensing_of_object_menu","next":null,"parent":",","inputs":{},"fields":{"OBJECT":["Sprite1",null]},"shadow":true},")":{"opcode":"operator_round","next":null,"parent":"q","inputs":{"NUM":[3,",",[4,""]]},"fields":{}},"+":{"opcode":"operator_round","next":null,"parent":"*","inputs":{"NUM":[3,"-",[4,""]]},"fields":{}},"-":{"opcode":"sensing_of","next":null,"parent":"+","inputs":{"OBJECT":[1,"aA"]},"fields":{"PROPERTY":["msx",null]}},"aA":{"opcode":"sensing_of_object_menu","next":null,"parent":"-","inputs":{},"fields":{"OBJECT":["Sprite1",null]},"shadow":true}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"3339a2953a3bf62bb80e54ff575dbced","md5ext":"3339a2953a3bf62bb80e54ff575dbced.svg","rotationCenterX":0,"rotationCenterY":0}],"sounds":[],"volume":100,"layerOrder":2,"visible":true,"x":-215,"y":160,"size":50,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[{"id":"*~X6PfYEQNg~b}=JxzL:","mode":"default","opcode":"data_variable","params":{"VARIABLE":"old mouse x"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"wQrv[Kyr}iojcPCDf8Y;","mode":"default","opcode":"data_variable","params":{"VARIABLE":"mouse vel"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":32,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"sensing_mousex","mode":"default","opcode":"sensing_mousex","params":{},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":59,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"vtmUKBvC!_q0TC#C^M2+","mode":"default","opcode":"data_variable","params":{"VARIABLE":"Velocity"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"$G$0D6stkBl1^5e)%@{d","mode":"default","opcode":"data_variable","params":{"VARIABLE":"msx"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":32,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"x06fyYTVi[%Zw{|RpdRj","mode":"default","opcode":"data_variable","params":{"VARIABLE":"msy"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":86,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"=A:8R)M2t7WXLZn:JT3y","mode":"default","opcode":"data_variable","params":{"VARIABLE":"short?"},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"sensing_mousey","mode":"default","opcode":"sensing_mousey","params":{},"spriteName":null,"value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"VJ@$3iy0D**|MC@k)|,P","mode":"default","opcode":"data_variable","params":{"VARIABLE":"x"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":5,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"7g@ZO1iuC0=h5:.edC}N","mode":"default","opcode":"data_variable","params":{"VARIABLE":"y"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":32,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":"w5**{$(~f,gaSSPE6@eH","mode":"default","opcode":"data_variable","params":{"VARIABLE":"camx"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":59,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true},{"id":")sT{]i/]8O~#sz)fZID}","mode":"default","opcode":"data_variable","params":{"VARIABLE":"camy"},"spriteName":"Sprite1","value":0,"width":0,"height":0,"x":0,"y":86,"visible":false,"sliderMin":0,"sliderMax":100,"isDiscrete":true}],"extensions":["theshovelcanvaseffects","SPcamera","stretch","HyperSense2SP","pointerlock","text"],"extensionURLs":{"theshovelcanvaseffects":"https://extensions.turbowarp.org/TheShovel/CanvasEffects.js","SPcamera":"https://extensions.turbowarp.org/SharkPool/Camera.js","stretch":"https://extensions.turbowarp.org/stretch.js","HyperSense2SP":"data:text/javascript;base64,Ly8gTmFtZTogSHlwZXIgU2Vuc2UgVjIKLy8gSUQ6IEh5cGVyU2Vuc2UyU1AKLy8gRGVzY3JpcHRpb246IENvb2wgTmV3IFNlbnNpbmcgQmxvY2tzCi8vIEJ5OiBTaGFya1Bvb2wKLy8gTGljZW5zZTogTUlUCgovLyBWZXJzaW9uIDIuMC4wMQoKKGZ1bmN0aW9uIChTY3JhdGNoKSB7CiAgInVzZSBzdHJpY3QiOwogIGlmICghU2NyYXRjaC5leHRlbnNpb25zLnVuc2FuZGJveGVkKSB0aHJvdyBuZXcgRXJyb3IoIkh5cGVyIFNlbnNlIG11c3QgcnVuIHVuc2FuZGJveGVkIik7CgogIGNvbnN0IG1lbnVJY29uVVJJID0KImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeE5EVXVNamt6SWlCb1pXbG5hSFE5SWpFME5TNHlPVE1pSUhacFpYZENiM2c5SWpBZ01DQXhORFV1TWpreklERTBOUzR5T1RNaVBqeG5JSE4wY205clpTMXRhWFJsY214cGJXbDBQU0l4TUNJK1BIQmhkR2dnWkQwaVRUQWdOekl1TmpRM1F6QWdNekl1TlRJMUlETXlMalV5TlNBd0lEY3lMalkwTnlBd2N6Y3lMalkwTnlBek1pNDFNalVnTnpJdU5qUTNJRGN5TGpZME55MHpNaTQxTWpVZ056SXVOalEzTFRjeUxqWTBOeUEzTWk0Mk5EZFRNQ0F4TVRJdU56WTVJREFnTnpJdU5qUTNJaUJtYVd4c1BTSWpOREkzWmprNUlpOCtQSEJoZEdnZ1pEMGlUVGd1TURreElEY3lMalkwTjJNd0xUTTFMalkxTXlBeU9DNDVNRE10TmpRdU5UVTJJRFkwTGpVMU5pMDJOQzQxTlRaek5qUXVOVFUySURJNExqa3dNeUEyTkM0MU5UWWdOalF1TlRVMkxUSTRMamt3TXlBMk5DNDFOVFl0TmpRdU5UVTJJRFkwTGpVMU5sTTRMakE1TVNBeE1EZ3VNeUE0TGpBNU1TQTNNaTQyTkRjaUlHWnBiR3c5SWlNMVkySXhaRFlpTHo0OGNHRjBhQ0JrUFNKTk1UQTJMakl4TlNBeE1EZ3VPRGcwWVRJdU5qY2dNaTQyTnlBd0lEQWdNUzB4TGpnNE5pMHVOemhNTXpjdU56VWdOREV1TlRJeVlUSXVOamNnTWk0Mk55QXdJREFnTVNBd0xUTXVOemN5SURJdU5qY2dNaTQyTnlBd0lEQWdNU0F6TGpjM01pQXdiRFkyTGpVNElEWTJMalU0WVRJdU5qWTVJREl1TmpZNUlEQWdNQ0F4TFRFdU9EZzNJRFF1TlRVMElpQm1hV3hzUFNJalptWm1JaTgrUEhCaGRHZ2daRDBpVFRZMUxqYzFOQ0ExTVM0d09ETmpNQ0E0TGpFd015MDJMalUyT0NBeE5DNDJOekV0TVRRdU5qY3hJREUwTGpZM01YTXRNVFF1TmpjeExUWXVOVFk0TFRFMExqWTNNUzB4TkM0Mk4yTXdMVGd1TVRBMElEWXVOVFk0TFRFMExqWTNNaUF4TkM0Mk55MHhOQzQyTnpJZ09DNHhNRFFnTUNBeE5DNDJOeklnTmk0MU5qZ2dNVFF1TmpjeUlERTBMalkzTVNJZ1ptbHNiRDBpSTJabVppSXZQanh3WVhSb0lHUTlJazAyTXk0M01pQTRNUzR6TnpGakxUY3VPRGcxTFRFdU9EWXlMVEV5TGpjMk9TMDVMamMyTkMweE1DNDVNRFl0TVRjdU5qVnpPUzQzTmpRdE1USXVOelk1SURFM0xqWTFMVEV3TGprd055QXhNaTQzTmprZ09TNDNOalVnTVRBdU9UQTNJREUzTGpZMVl5MHhMamcyTWlBM0xqZzROaTA1TGpjMk5TQXhNaTQzTnkweE55NDJOU0F4TUM0NU1EY2lJR1pwYkd3OUlpTm1abVlpTHo0OGNHRjBhQ0JrUFNKTk9UY3VOelkzSURnekxqQTVOR013SURndU1UQXlMVFl1TlRjZ01UUXVOamN6TFRFMExqWTNNeUF4TkM0Mk56TnpMVEUwTGpZM01pMDJMalUzTFRFMExqWTNNaTB4TkM0Mk56TWdOaTQxTmprdE1UUXVOamN4SURFMExqWTNNaTB4TkM0Mk56RmpPQzR4TURJZ01DQXhOQzQyTnpNZ05pNDFOeUF4TkM0Mk56TWdNVFF1TmpjaUlHWnBiR3c5SWlObVptWWlMejQ4Y0dGMGFDQmtQU0pOTVRBMkxqSXhOU0F4TURndU9EZzBZVEl1TmpjZ01pNDJOeUF3SURBZ01TMHhMamc0TmkwdU56aHNMVEUyTGpNMExURTJMak0wWVRJdU5qWTFJREl1TmpZMUlEQWdNQ0F4SURBdE15NDNOek1nTWk0Mk55QXlMalkzSURBZ01DQXhJRE11TnpjeUlEQnNNVFl1TXpRZ01UWXVNelJoTWk0Mk55QXlMalkzSURBZ01DQXhJREFnTXk0M056TWdNaTQyT0NBeUxqWTRJREFnTUNBeExURXVPRGcyTGpjNElpQm1hV3hzUFNJalptWm1JaTgrUEhCaGRHZ2daRDBpVFRFMUxqTXhOU0EzTWk0Mk5EY2dNamd1TVRJeUlEVTVMamcwZGpJMUxqWXhOSHB0TnpBdU1UTTVMVFEwTGpVeU5VZzFPUzQ0Tkd3eE1pNDRNRGN0TVRJdU9EQTNlbTAwTkM0MU1qVWdORFF1TlRJMUxURXlMamd3TnlBeE1pNDRNRGRXTlRrdU9EUjZUVFU1TGpnMElERXhOeTR4TnpKb01qVXVOakUwYkMweE1pNDRNRGNnTVRJdU9EQTNlaUlnWm1sc2JEMGlJMlptWmlJZ2MzUnliMnRsUFNJalptWm1JaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRXVOU0l2UGp3dlp6NDhMM04yWno0PSI7CgogIGNvbnN0IENhc3QgPSBTY3JhdGNoLkNhc3Q7CiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwogIGNvbnN0IHJlbmRlciA9IHZtLnJlbmRlcmVyOwogIGNvbnN0IHNlbnNpbmdDb3JlID0gcnVudGltZS5leHRfc2NyYXRjaDNfc2Vuc2luZzsKICBjb25zdCBpc1BhY2thZ2VkID0gdHlwZW9mIHNjYWZmb2xkaW5nICE9PSAidW5kZWZpbmVkIjsKCiAgY29uc3QgdHJhbnNsYXRlZEtleXMgPSBbCiAgICAiYW55IiwgImEiLCAiYiIsICJjIiwgImQiLCAiZSIsICJmIiwgImciLCAiaCIsICJpIiwgImoiLAogICAgImsiLCAibCIsICJtIiwgIm4iLCAibyIsICJwIiwgInEiLCAiciIsICJzIiwgInQiLCAidSIsCiAgICAidiIsICJ3IiwgIngiLCAieSIsICJ6IiwKICAgICIwIiwgIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5IiwKICAgICJ1cCBhcnJvdyIsICJkb3duIGFycm93IiwgImxlZnQgYXJyb3ciLCAicmlnaHQgYXJyb3ciLAogICAgInNwYWNlIiwgImVudGVyIiwgInNoaWZ0IiwgImNvbnRyb2wiLCAiYWx0IiwgIm1ldGEiLCAiZXNjYXBlIiwKICAgICJiYWNrc3BhY2UiLCAidGFiIiwgImNhcHMgbG9jayIsICJpbnNlcnQiLCAiZGVsZXRlIiwgInBhZ2UgdXAiLCAicGFnZSBkb3duIiwKICAgICJgIiwgIn4iLCAiISIsICI/IiwgIkAiLCAiIyIsICIkIiwgIiUiLCAiXiIsICImIiwgIioiLCAiLSIsICJfIiwgIisiLCAiPSIsCiAgICAiKCIsICIpIiwgIlsiLCAiXSIsICJ7IiwgIn0iLCAiXFwiLCAifCIsICIvIiwgIjwiLCAiPiIsICIsIiwgIi4iLAogICAgImYxIiwgImYyIiwgImYzIiwgImY0IiwgImY1IiwgImY2IiwgImY3IiwgImY4IiwgImY5IiwgImYxMCIsICJmMTEiLCAiZjEyIiAKICBdLm1hcCgoa2V5KSA9PiB7CiAgICBpZiAoL15bYS16MC05IF0rJC9pLnRlc3Qoa2V5KSkgcmV0dXJuIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoa2V5KSwgdmFsdWU6IGtleSB9OwogICAgZWxzZSByZXR1cm4geyB0ZXh0OiBrZXksIHZhbHVlOiBrZXkgfTsKICB9KTsKCiAgY29uc3Qga2V5RGF0YSA9IHsKICAgIGN1cktleTogIiIsCiAgICBsYXN0S2V5OiAiIiwKICAgIGtleXM6IFtdLAogICAga2V5VGltZXJzOiBuZXcgTWFwKCksCiAgICBrZXlCbG9ja2VyczogbmV3IFNldCgpCiAgfTsKCiAgY29uc3QgbW91c2VEYXRhID0gewogICAgY2xpZW50OiBbMCwgMF0sCiAgICB2ZWxvY2l0eTogWzAsIDBdLAogICAgc2Nyb2xsOiBbMCwgMF0sCiAgICBzY3JvbGxWZWxvY2l0eTogWzAsIDBdCiAgfTsKCiAgLyogdW5kZWZpbmVkIGlzIGRlZmF1bHQgdmFsdWVzICovCiAgY29uc3QgYXNrQm94U2V0dGluZ3MgPSB7CiAgICB4OiB1bmRlZmluZWQsIHk6IHVuZGVmaW5lZCwKICAgIHdpZHRoOiB1bmRlZmluZWQsCiAgICBpbnB1dDogewogICAgICB0eXBlOiB1bmRlZmluZWQsCiAgICAgIHZhbHVlOiB1bmRlZmluZWQKICAgIH0sCiAgfTsKCiAgY29uc3QgdmFsaWRJbnB1dHMgPSBbCiAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJ0ZXh0IiksIHZhbHVlOiAidGV4dCIgfSwKICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInBhc3N3b3JkIiksIHZhbHVlOiAicGFzc3dvcmQiIH0sCiAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJudW1iZXIiKSwgdmFsdWU6ICJudW1iZXIiIH0sCiAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjb2xvciIpLCB2YWx1ZTogImNvbG9yIiB9CiAgXTsKCiAgbGV0IGxvdWRuZXNzQ2FjaGUgPSBbXTsKCiAgY2xhc3MgSHlwZXJTZW5zZTJTUCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgcnVudGltZS5vbigiQkVGT1JFX0VYRUNVVEUiLCAoKSA9PiB7CiAgICAgICAgLy8ga2V5IG9wZXJhdGlvbnMKICAgICAgICBjb25zdCBrZXlUaW1lcnMgPSBrZXlEYXRhLmtleVRpbWVyczsKICAgICAgICBrZXlUaW1lcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gewogICAgICAgICAga2V5VGltZXJzLnNldChrZXksIHZhbHVlICsgMC4xKTsKICAgICAgICB9KTsKICAgICAgICBydW50aW1lLnN0YXJ0SGF0cygiSHlwZXJTZW5zZTJTUF93aGVuS2V5Iik7CgogICAgICAgIC8vIHZlbG9jaXR5IGFwcGxpY2F0aW9uCiAgICAgICAgY29uc3QgeyB2ZWxvY2l0eSwgc2Nyb2xsVmVsb2NpdHkgfSA9IG1vdXNlRGF0YTsKICAgICAgICBtb3VzZURhdGEudmVsb2NpdHlbMF0gKz0gKDAgLSB2ZWxvY2l0eVswXSkgLyAzOwogICAgICAgIG1vdXNlRGF0YS52ZWxvY2l0eVsxXSArPSAoMCAtIHZlbG9jaXR5WzFdKSAvIDM7CgogICAgICAgIG1vdXNlRGF0YS5zY3JvbGxWZWxvY2l0eVswXSArPSAoMCAtIHNjcm9sbFZlbG9jaXR5WzBdKSAvIDQ7CiAgICAgICAgbW91c2VEYXRhLnNjcm9sbFZlbG9jaXR5WzFdICs9ICgwIC0gc2Nyb2xsVmVsb2NpdHlbMV0pIC8gNDsKICAgICAgfSk7CgogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIChlKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy50b1Byb3BlcktleShlLCBmYWxzZSk7CiAgICAgICAga2V5RGF0YS5jdXJLZXkgPSBrZXk7CiAgICAgICAga2V5RGF0YS5sYXN0S2V5ID0ga2V5OwogICAgICAgIGlmICgha2V5RGF0YS5rZXlUaW1lcnMuaGFzKGtleSkpIHsKICAgICAgICAgIGtleURhdGEua2V5cy5wdXNoKGtleSk7CiAgICAgICAgICBrZXlEYXRhLmtleVRpbWVycy5zZXQoa2V5LCAwKTsKICAgICAgICB9CgogICAgICAgIC8vIGlmIHRoaXMgaXMgYSBibG9ja2VkIGtleSwgcHJldmVudCBkZWZhdWx0CiAgICAgICAgaWYgKGtleURhdGEua2V5QmxvY2tlcnMuaGFzKCJhbnkiKSB8fCBrZXlEYXRhLmtleUJsb2NrZXJzLmhhcyhrZXkpKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgKGUpID0+IHsKICAgICAgICBjb25zdCBrZXkgPSB0aGlzLnRvUHJvcGVyS2V5KGUsIGZhbHNlKTsKICAgICAgICBjb25zdCBpbmRleCA9IGtleURhdGEua2V5cy5pbmRleE9mKGtleSk7CgogICAgICAgIGtleURhdGEua2V5VGltZXJzLmRlbGV0ZShrZXkpOwogICAgICAgIGtleURhdGEua2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIGtleURhdGEuY3VyS2V5ID0ga2V5RGF0YS5rZXlzWzBdIHx8ICIiOwogICAgICB9KTsKCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwgKGUpID0+IHsKICAgICAgICBjb25zdCBvbGRTY3JvbGwgPSBtb3VzZURhdGEuc2Nyb2xsOwogICAgICAgIG1vdXNlRGF0YS5zY3JvbGwgPSBbb2xkU2Nyb2xsWzBdICsgZS5kZWx0YVgsIG9sZFNjcm9sbFsxXSArIGUuZGVsdGFZXTsKICAgICAgICBtb3VzZURhdGEuc2Nyb2xsVmVsb2NpdHkgPSBbZS5kZWx0YVgsIGUuZGVsdGFZXTsKCiAgICAgICAgaWYgKGUuZGVsdGFYID4gMSkgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2UyU1Bfd2hlblNjcm9sbGVkIiwgeyBESVI6ICJyaWdodCIgfSk7CiAgICAgICAgZWxzZSBpZiAoZS5kZWx0YVggPCAtMSkgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2UyU1Bfd2hlblNjcm9sbGVkIiwgeyBESVI6ICJsZWZ0IiB9KTsKCiAgICAgICAgaWYgKGUuZGVsdGFZID4gMSkgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2UyU1Bfd2hlblNjcm9sbGVkIiwgeyBESVI6ICJ1cCIgfSk7CiAgICAgICAgZWxzZSBpZiAoZS5kZWx0YVkgPCAtMSkgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2UyU1Bfd2hlblNjcm9sbGVkIiwgeyBESVI6ICJkb3duIiB9KTsKICAgICAgfSk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIChlKSA9PiB7CiAgICAgICAgbW91c2VEYXRhLmNsaWVudCA9IFtlLmNsaWVudFgsIGUuY2xpZW50WV07CiAgICAgICAgbW91c2VEYXRhLnZlbG9jaXR5ID0gWwogICAgICAgICAgcnVudGltZS5pb0RldmljZXMubW91c2UuZ2V0U2NyYXRjaFgoKSwKICAgICAgICAgIHJ1bnRpbWUuaW9EZXZpY2VzLm1vdXNlLmdldFNjcmF0Y2hZKCkKICAgICAgICBdOwogICAgICB9KTsKICAgIH0KICAgIGdldEluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6ICJIeXBlclNlbnNlMlNQIiwKICAgICAgICBuYW1lOiBTY3JhdGNoLnRyYW5zbGF0ZSgiSHlwZXIgU2Vuc2UgVjIiKSwKICAgICAgICBjb2xvcjE6ICIjNWNiMWQ2IiwKICAgICAgICBjb2xvcjI6ICIjNDdhOGQxIiwKICAgICAgICBjb2xvcjM6ICIjMmU4ZWI4IiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIlNjcm9sbCBEZWN0ZWN0aW9uIikgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2Nyb2xsVmFsdWUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2Nyb2xsIFtUWVBFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDUk9MTF9UWVBFUyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0U2Nyb2xsRGlzdCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBzY3JvbGwgZGlzdGFuY2UgW1BPU10gdG8gW0FNVF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgUE9TOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlBPU0lUSU9OIiB9LAogICAgICAgICAgICAgIEFNVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjaGFuZ2VTY3JvbGxEaXN0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiY2hhbmdlIHNjcm9sbCBkaXN0YW5jZSBbUE9TXSBieSBbQU1UXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBQT1M6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiUE9TSVRJT04iIH0sCiAgICAgICAgICAgICAgQU1UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxMDAgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAid2hlblNjcm9sbGVkIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5FVkVOVCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIndoZW4gc2Nyb2xsZWQgW0RJUl0iKSwKICAgICAgICAgICAgaXNFZGdlQWN0aXZhdGVkOiBmYWxzZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgRElSOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDUk9MTF9FVkVOVFMiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImlzU2Nyb2xsZWQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJpcyBzY3JvbGxpbmcgW1RZUEVdID8iKSwKICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiU0NST0xMX0VWRU5UUyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIk1vdXNlIERldGVjdGlvbiIpIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm1vdXNlQ2xpY2siLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJpcyBtb3VzZSBbQlVUVE9OXSBkb3duPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCVVRUT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiTU9VU0VfQlVUVE9OUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZWFsTW91c2UiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVhbCBtb3VzZSBbUE9TXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBQT1M6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiUE9TSVRJT04iIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAibW91c2VWZWxvY2l0eSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJtb3VzZSB2ZWxvY2l0eSBbUE9TXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBQT1M6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiUE9TSVRJT04iIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIktleSBEZXRlY3Rpb24iKSB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ3aGVuS2V5IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5IQVQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJ3aGVuIFtLRVldIGtleSBbVFlQRV0iKSwKICAgICAgICAgICAgaXNFZGdlQWN0aXZhdGVkOiBmYWxzZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIktFWVMiIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJLRVlfUFJFU1MiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiaXNLZXkiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJrZXkgW0tFWV0gW1RZUEVdID8iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIktFWVMiIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJLRVlfUFJFU1MiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjdXJyZW50S2V5IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIltUWVBFXSBwcmVzc2VkIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiS0VZX0xJU1RTIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInRpbWVLZXlQcmVzc2VkIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNlY29uZHMgW0tFWV0ga2V5IHByZXNzZWQiKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgS0VZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIktFWVMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRLZXlCbG9jayIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImJsb2NrIGRlZmF1bHQgYmVoYXZpb3VyIG9mIGtleSBbS0VZXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBLRVk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiS0VZUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyZXNldEtleUJsb2NrcyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInJlc2V0IGJsb2NrZWQga2V5IGJlaGF2aW91cnMiKQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0S2V5QmxvY2tlcnMiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYmxvY2tlZCBrZXlzIikKICAgICAgICAgIH0sCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJUb3VjaGluZyBFeHBhbmRlZCIpIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZVBvaW50aW5nIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiaXMgW1NQUklURTFdIHBvaW50aW5nIHRvd2FyZHMgW1NQUklURTJdPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEUxOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9UQVJHRVRTIiB9LAogICAgICAgICAgICAgIFNQUklURTI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiT0JKRUNUUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzcHJpdGVUb3VjaGluZ1Nwcml0ZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImlzIFtTUFJJVEUxXSB0b3VjaGluZyBbU1BSSVRFMl0/IiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiT0JKRUNUUyIgfSwKICAgICAgICAgICAgICBTUFJJVEUyOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9UQVJHRVRTIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZVRvdWNoaW5nU3ByaXRlVHlwZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImlzIFtTUFJJVEUxXSB0b3VjaGluZyBbVFlQRV0gb2YgW1NQUklURTJdPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEUxOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9PQkpFQ1RTIiB9LAogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUX1RZUEUiIH0sCiAgICAgICAgICAgICAgU1BSSVRFMjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZVRvdWNoaW5nQ2xvbmUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJpcyBbU1BSSVRFMV0gdG91Y2hpbmcgY2xvbmUgb2YgW1NQUklURTJdIHdpdGggW1ZBUl0gc2V0IHRvIFtWQUxdPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEUxOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9PQkpFQ1RTIiB9LAogICAgICAgICAgICAgIFNQUklURTI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfSwKICAgICAgICAgICAgICBWQVI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJteSB2YXJpYWJsZSIpIH0sCiAgICAgICAgICAgICAgVkFMOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzcHJpdGVzVG91Y2hpbmciLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic3ByaXRlcyB0b3VjaGluZyBbU1BSSVRFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTUFJJVEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiQUxMX09CSkVDVFMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0TmVpZ2hib3JzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIm5laWdoYm9ycyBvZiBbU1BSSVRFXSBpbiByYW5nZSBbRElBTUVURVJdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBTExfT0JKRUNUUyIgfSwKICAgICAgICAgICAgICBESUFNRVRFUjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMjAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJvYmpUb3VjaGluZ0NvbG9yIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImNvbG9yIHRvdWNoaW5nIFtTUFJJVEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBTExfT0JKRUNUUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjb2xvckF0UG9zaXRpb24iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiY29sb3IgYXQgeCBbeF0geSBbeV0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgeDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZURyYWdNb2RlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGRyYWcgbW9kZSBvZiBbU1BSSVRFXSB0byBbRFJBR10iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9UQVJHRVRTIiB9LAogICAgICAgICAgICAgIERSQUc6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRFJBR19NT0RFUyIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic3ByaXRlRHJhZ2dhYmxlIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiaXMgW1NQUklURV0gW0RSQUddID8iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFMTF9UQVJHRVRTIiB9LAogICAgICAgICAgICAgIERSQUc6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRFJBR19UWVBFIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiQXNraW5nIikgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYWR2YW5jZWRBc2siLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJhc2sgW1FVRVNUSU9OXSBhcyBbVFlQRV0gYW5kIFtXQUlUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBRVUVTVElPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogU2NyYXRjaC50cmFuc2xhdGUoIndoYXQgaXMgeW91ciBuYW1lPyIpIH0sCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBU0tfVFlQRSIgfSwKICAgICAgICAgICAgICBXQUlUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIldBSVRfVFlQRVMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYXNrUmVwb3J0ZXIiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYXNrIFtRVUVTVElPTl0gYXMgW1RZUEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFFVRVNUSU9OOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiBTY3JhdGNoLnRyYW5zbGF0ZSgid2hhdCBpcyB5b3VyIG5hbWU/IikgfSwKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFTS19UWVBFIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInN0b3BBc2tpbmciLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzdG9wIGFza2luZyBxdWVzdGlvbiIpCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjdXJyZW50VHlwZWQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgidHlwZWQgYW5zd2VyIikKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImlzQXNraW5nIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiaXMgYXNraW5nIHF1ZXN0aW9uPyIpCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldEFza0Rpc3BsYXkiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgYXNrIG1vbml0b3IgeDogW3hdIHk6IFt5XSB3aWR0aDogW3dpZHRoXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICB4OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgICAgeTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCwgZXhlbXB0RnJvbU5vcm1hbGl6YXRpb246IHRydWUgfSwKICAgICAgICAgICAgICB3aWR0aDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNDgwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2V0QXNrVHlwZSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBhc2sgYm94IGlucHV0IHRvIFtUWVBFXSBkZWZhdWx0IHZhbHVlIFtURVhUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFTS19JTlBVVFMiIH0sCiAgICAgICAgICAgICAgVEVYVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIi4uLiIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJzZXRBc2tMaXN0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGFzayBib3ggaW5wdXQgdG8gZHJvcGRvd24gd2l0aCBpdGVtcyBpbiBhcnJheSBbTElTVF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgTElTVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIltcIm9wdGlvbiAxXCIsIFwib3B0aW9uIDJcIl0iIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIk1pc2NlbGxhbmVvdXMiKSB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJpc1NjcmVlbiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImlzIFtTQ1JFRU5dID8iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgU0NSRUVOOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDUkVFTlMiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAic2NyZWVuT2ZmIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInN0YWdlIFtUWVBFXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBUWVBFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNUQUdFX1NDQUxFUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImF2ZXJhZ2VNaWNWb2x1bWUiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYXZlcmFnZSBsb3VkbmVzcyIpCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJnZXRTcHJpdGVOYW1lIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIm15IHNwcml0ZSBuYW1lIikKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImFsbExheWVycyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJtYXggc3ByaXRlIGxheWVycyIpCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImJvb2xlYW4iLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJpcyBbU1RSSU5HXSByZWFsPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBTVFJJTkc6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBleGVtcHRGcm9tTm9ybWFsaXphdGlvbjogdHJ1ZSB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImdldEFsbFN0cmluZyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJnZXQgW1RFWFRdIGluIFtTVFJJTkddIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFNUUklORzogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogU2NyYXRjaC50cmFuc2xhdGUoInJvdGF0aW5nIGEgNiBtYWtlcyBhIDkhIikgfSwKICAgICAgICAgICAgICBURVhUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogInN0cmluZ190eXBlcyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgbWVudXM6IHsKICAgICAgICAgIE9CSkVDVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5fZ2V0T2JqZWN0cyh0cnVlLCBmYWxzZSkgfSwKICAgICAgICAgIEFMTF9PQkpFQ1RTOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IHRoaXMuX2dldE9iamVjdHModHJ1ZSwgdHJ1ZSkgfSwKICAgICAgICAgIFRBUkdFVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5fZ2V0T2JqZWN0cyhmYWxzZSwgZmFsc2UpIH0sCiAgICAgICAgICBBTExfVEFSR0VUUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLl9nZXRPYmplY3RzKGZhbHNlLCB0cnVlKSB9LAogICAgICAgICAgUE9TSVRJT046IFsieCIsICJ5Il0sCiAgICAgICAgICBXQUlUX1RZUEVTOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIndhaXQiKSwgdmFsdWU6ICJ3YWl0IiB9LAogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjb250aW51ZSIpLCB2YWx1ZTogImNvbnRpbnVlIiB9CiAgICAgICAgICBdLAogICAgICAgICAgU0NST0xMX1RZUEVTOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRpc3RhbmNlIHgiKSwgdmFsdWU6ICJkaXN0YW5jZVgiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRpc3RhbmNlIHkiKSwgdmFsdWU6ICJkaXN0YW5jZVkiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInZlbG9jaXR5IHgiKSwgdmFsdWU6ICJ2ZWxvY2l0eVgiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInZlbG9jaXR5IHkiKSwgdmFsdWU6ICJ2ZWxvY2l0eVkiIH0KICAgICAgICAgIF0sCiAgICAgICAgICBTQ1JPTExfRVZFTlRTOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInVwIiksIHZhbHVlOiAidXAiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRvd24iKSwgdmFsdWU6ICJkb3duIiB9LAogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJsZWZ0IiksIHZhbHVlOiAibGVmdCIgfSwKICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmlnaHQiKSwgdmFsdWU6ICJyaWdodCIgfQogICAgICAgICAgXSwKICAgICAgICAgIE1PVVNFX0JVVFRPTlM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogWwogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImxlZnQiKSwgdmFsdWU6ICIwIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNjcm9sbCB3aGVlbCIpLCB2YWx1ZTogIjEiIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmlnaHQiKSwgdmFsdWU6ICIyIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImJhY2siKSwgdmFsdWU6ICIzIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImZvd2FyZCIpLCB2YWx1ZTogIjQiIH0KICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgICBLRVlfUFJFU1M6IFsKICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicHJlc3NlZCIpLCB2YWx1ZTogInByZXNzZWQiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImhpdCIpLCB2YWx1ZTogImhpdCIgfQogICAgICAgICAgXSwKICAgICAgICAgIEtFWV9MSVNUUzogWwogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjdXJyZW50IGtleSIpLCB2YWx1ZTogInByZXNzIiB9LAogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJrZXlzIiksIHZhbHVlOiAicHJlc3NlZCIgfSwKICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgibGFzdCBrZXkiKSwgdmFsdWU6ICJsYXN0UHJlc3MiIH0KICAgICAgICAgIF0sCiAgICAgICAgICBLRVlTOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IHRyYW5zbGF0ZWRLZXlzCiAgICAgICAgICB9LAogICAgICAgICAgVEFSR0VUX1RZUEU6IFsKICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicGFyZW50IiksIHZhbHVlOiAicGFyZW50IiB9LAogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJjbG9uZSIpLCB2YWx1ZTogImNsb25lIiB9CiAgICAgICAgICBdLAogICAgICAgICAgRFJBR19UWVBFOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRyYWdnYWJsZSIpLCB2YWx1ZTogImRyYWdnYWJsZSIgfSwKICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYmVpbmcgZHJhZ2dlZCIpLCB2YWx1ZTogImJlaW5nIGRyYWdnZWQiIH0KICAgICAgICAgIF0sCiAgICAgICAgICBEUkFHX01PREVTOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkcmFnZ2FibGUiKSwgdmFsdWU6ICJkcmFnZ2FibGUiIH0sCiAgICAgICAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgibm90IGRyYWdnYWJsZSIpLCB2YWx1ZTogIm5vdCBkcmFnZ2FibGUiIH0KICAgICAgICAgICAgXQogICAgICAgICAgfSwKICAgICAgICAgIEFTS19UWVBFOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInN0YWdlIiksIHZhbHVlOiAic3RhZ2UiIH0sCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNwcml0ZSIpLCB2YWx1ZTogInNwcml0ZSIgfQogICAgICAgICAgXSwKICAgICAgICAgIEFTS19JTlBVVFM6IHsKICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLAogICAgICAgICAgICBpdGVtczogdmFsaWRJbnB1dHMKICAgICAgICAgIH0sCiAgICAgICAgICBTQ1JFRU5TOiBbCiAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImZ1bGxzY3JlZW4iKSwgdmFsdWU6ICJmdWxsc2NyZWVuIiB9LAogICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzbWFsbHNjcmVlbiIpLCB2YWx1ZTogInNtYWxsc2NyZWVuIiB9CiAgICAgICAgICBdLAogICAgICAgICAgU1RBR0VfU0NBTEVTOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJ3aWR0aCIpLCB2YWx1ZTogIndpZHRoIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImRpc3BsYXkgd2lkdGgiKSwgdmFsdWU6ICJkaXNwbGF5IHdpZHRoIiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImhlaWdodCIpLCB2YWx1ZTogImhlaWdodCIgfSwKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJkaXNwbGF5IGhlaWdodCIpLCB2YWx1ZTogImRpc3BsYXkgaGVpZ2h0IiB9LAogICAgICAgICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNpemUgcmF0aW8iKSwgdmFsdWU6ICJyYXRpbyIgfQogICAgICAgICAgICBdCiAgICAgICAgICB9LAogICAgICAgICAgc3RyaW5nX3R5cGVzOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJudW1iZXJzIiksIHZhbHVlOiAibnVtYmVycyIgfSwKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJsZXR0ZXJzIiksIHZhbHVlOiAibGV0dGVycyIgfSwKICAgICAgICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzcGVjaWFsIGNoYXJhY3RlcnMiKSwgdmFsdWU6ICJzcGVjaWFsIiB9CiAgICAgICAgICAgIF0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CgogICAgLy8gSGVscGVyIEZ1bmNzCiAgICBfZ2V0T2JqZWN0cyhtb3VzZSwgbXlzZWxmKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gW107CiAgICAgIGlmIChtb3VzZSkgeyBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIm1vdXNlLXBvaW50ZXIiKSwgdmFsdWU6ICJfbW91c2VfIiB9KSB9CiAgICAgIGlmIChteXNlbGYpIHsgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJteXNlbGYiKSwgdmFsdWU6ICJfbXlzZWxmXyIgfSkgfQogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2ldOwogICAgICAgIGlmICh0YXJnZXQuaXNPcmlnaW5hbCkgewogICAgICAgICAgY29uc3QgdGFyZ2V0TmFtZSA9IHRhcmdldC5nZXROYW1lKCk7CiAgICAgICAgICBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogdGFyZ2V0TmFtZSwgdmFsdWU6IHRhcmdldE5hbWUgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzcHJpdGVOYW1lcy5sZW5ndGggPiAwID8gc3ByaXRlTmFtZXMgOiBbIiJdOwogICAgfQoKICAgIHRvUHJvcGVyS2V5KGV2ZW50LCByZXZlcnNlKSB7CiAgICAgIGxldCBrZXkgPSBldmVudC5rZXk7CiAgICAgIGlmIChrZXkgPT09ICIgIikgcmV0dXJuICJzcGFjZSI7CiAgICAgIGVsc2UgaWYgKGtleS5sZW5ndGggPiAxKSBrZXkgPSBrZXkudG9Mb3dlckNhc2UoKTsKCiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgiYXJyb3ciKSkga2V5ID0ga2V5LnJlcGxhY2UoImFycm93IiwgIiIpICsgIiBhcnJvdyI7CiAgICAgIGVsc2UgaWYgKGtleS5zdGFydHNXaXRoKCJwYWdlIikpIGtleSA9IGtleS5yZXBsYWNlKCJwYWdlIiwgInBhZ2UgIik7CiAgICAgIGVsc2UgaWYgKGtleSA9PT0gImNhcHNsb2NrIikga2V5ID0gImNhcHMgbG9jayI7CiAgICAgIGVsc2UgaWYgKGtleSA9PT0gImNvbnRleHRtZW51Iikga2V5ID0gImNvbnRleHQgbWVudSI7CiAgICAgIHJldHVybiBrZXk7CiAgICB9CgogICAga2V5Q2hlY2tIYW5kbGVyKGtleSwgaGl0T25seSkgewogICAgICBjb25zdCB7IGtleVRpbWVycywgY3VyS2V5IH0gPSBrZXlEYXRhOwogICAgICBpZiAoa2V5ID09PSAiYW55IiAmJiBjdXJLZXkgIT09ICIiKSByZXR1cm4gaGl0T25seSA/IGtleVRpbWVycy5nZXQoY3VyS2V5KSA8PSAwLjEgOiB0cnVlOwogICAgICBpZiAoa2V5VGltZXJzLmhhcyhrZXkpKSByZXR1cm4gaGl0T25seSA/IGtleVRpbWVycy5nZXQoa2V5KSA8PSAwLjEgOiB0cnVlOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29sb3JBdFBvcyh4LCB5KSB7CiAgICAgIGNvbnN0IGNsaWVudFggPSBNYXRoLnJvdW5kKCgoKHJ1bnRpbWUuc3RhZ2VXaWR0aCAvIDIpICsgeCkgLyBydW50aW1lLnN0YWdlV2lkdGgpICogcmVuZGVyLl9nbC5jYW52YXMuY2xpZW50V2lkdGgpOwogICAgICBjb25zdCBjbGllbnRZID0gTWF0aC5yb3VuZCgoKChydW50aW1lLnN0YWdlSGVpZ2h0IC8gMikgLSB5KSAvIHJ1bnRpbWUuc3RhZ2VIZWlnaHQpICogcmVuZGVyLl9nbC5jYW52YXMuY2xpZW50SGVpZ2h0KTsKICAgICAgY29uc3QgcmdiID0gcmVuZGVyLmV4dHJhY3RDb2xvcihjbGllbnRYLCBjbGllbnRZLCAyMCkuY29sb3I7CiAgICAgIHJldHVybiBgIyR7cmdiLnIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICIwIil9JHtyZ2IuZy50b1N0cmluZygxNikucGFkU3RhcnQoMiwgIjAiKX0ke3JnYi5iLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAiMCIpfWA7CiAgICB9CgogICAgZ2V0VGFyZ2V0KG5hbWUsIHV0aWwsIGNoZWNrTW91c2UsIGNoZWNrTXlzZWxmKSB7CiAgICAgIGlmIChjaGVja01vdXNlICYmIG5hbWUgPT09ICJfbW91c2VfIikgcmV0dXJuICJfbW91c2VfIjsKICAgICAgaWYgKGNoZWNrTXlzZWxmICYmIG5hbWUgPT09ICJfbXlzZWxmXyIpIHJldHVybiB1dGlsLnRhcmdldDsKICAgICAgcmV0dXJuIHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKG5hbWUpOwogICAgfQoKICAgIHVwZGF0ZUFza01vbml0b3IoKSB7CiAgICAgIGxldCBib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbY2xhc3MqPSJxdWVzdGlvbiJdYCk7CiAgICAgIGlmICghYm94KSByZXR1cm47CgogICAgICBpZiAoaXNQYWNrYWdlZCkgYm94ID0gYm94LmZpcnN0RWxlbWVudENoaWxkOwogICAgICBlbHNlIGJveCA9IGJveC5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZDsKICAgICAgY29uc3QgeyB4LCB5LCB3aWR0aCwgaW5wdXQgfSA9IGFza0JveFNldHRpbmdzOwoKICAgICAgaWYgKHggIT09IHVuZGVmaW5lZCB8fCB5ICE9PSB1bmRlZmluZWQgfHwgd2lkdGggIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnN0IGNhbnZhc0JvdW5kcyA9IHJlbmRlci5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgY29uc3QgcmF0aW8gPSBjYW52YXNCb3VuZHMud2lkdGggLyBydW50aW1lLnN0YWdlV2lkdGg7CgogICAgICAgIGNvbnN0IHdpZHRoQ1NTID0gYHdpZHRoOiBjYWxjKCR7d2lkdGggPyBgJHt3aWR0aCAqIHJhdGlvfXB4YCA6ICIxMDAlIn0gLSAxcmVtKTtgOwogICAgICAgIGNvbnN0IHBvc2l0aW9uQ1NTID0gYHRyYW5zZm9ybTogdHJhbnNsYXRlKGNhbGMoLTUwJSArICR7eCA/PyAwfXB4KSwgY2FsYygtNTAlICsgJHt5ID8/IGlzUGFja2FnZWQgPyAtNTUgOiAxMDB9cHgpKTtgOwogICAgICAgIGJveC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgYG1hcmdpbjogMDsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiA1MCU7IHRvcDogNTAlOyAke3dpZHRoQ1NTfSAke3Bvc2l0aW9uQ1NTfWApOwogICAgICB9CgogICAgICBpZiAoaW5wdXQudHlwZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47CiAgICAgIGNvbnN0IGFza0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihpc1BhY2thZ2VkID8gYGlucHV0W2NsYXNzPSJzYy1xdWVzdGlvbi1pbnB1dCJdYCA6IGBkaXZbY2xhc3MqPSJxdWVzdGlvbiJdIFtjbGFzc149ImlucHV0X2lucHV0LWZvcm0iXWApOwogICAgICBjb25zdCBlbGVtZW50ID0gYm94LnF1ZXJ5U2VsZWN0b3IoYHNlbGVjdFtpZD0iU1AtaW5wdXRfc2VsZWN0Il1gKTsKICAgICAgaWYgKGVsZW1lbnQpIGVsZW1lbnQucmVtb3ZlKCk7CgogICAgICBpZiAoaW5wdXQudHlwZSA9PT0gImRyb3Bkb3duIikgewogICAgICAgIGNvbnN0IGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CiAgICAgICAgZHJvcGRvd24uaWQgPSAiU1AtaW5wdXRfc2VsZWN0IjsKICAgICAgICBkcm9wZG93bi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgYXNrSW5wdXQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKTsKICAgICAgICBkcm9wZG93bi5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgYHdpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiAjZmZmOyBjb2xvcjogIzUwNTA1MDsgYm9yZGVyLWNvbG9yOiAjRDlEOUQ5O2ApOwogICAgICAgIGlucHV0LnZhbHVlLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGl0ZW07IG9wdGlvbi50ZXh0ID0gaXRlbTsKICAgICAgICAgIGRyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgICAgfSk7CgogICAgICAgIGFza0lucHV0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZHJvcGRvd24pOwogICAgICAgIGFza0lucHV0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgYXNrSW5wdXQudmFsdWUgPSBkcm9wZG93bi52YWx1ZTsKICAgICAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZSkgPT4gewogICAgICAgICAgYXNrSW5wdXQudmFsdWUgPSBkcm9wZG93bi52YWx1ZTsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGJveC5xdWVyeVNlbGVjdG9yKGBidXR0b25bY2xhc3MqPSJxdWVzdGlvbi1zdWJtaXQtYnV0dG9uIl1gKTsKICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2Vuc2luZ0NvcmUuX2Fuc3dlciA9IGFza0lucHV0LnZhbHVlIH0sIDEwKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoaW5wdXQudmFsdWUpIGFza0lucHV0LnZhbHVlID0gaW5wdXQudmFsdWU7CiAgICAgICAgYXNrSW5wdXQudHlwZSA9IGlucHV0LnR5cGU7CiAgICAgICAgYXNrSW5wdXQucGF0dGVybiA9IGlucHV0LnR5cGUgPT09ICJudW1iZXIiID8gIlswLTldKiIgOiAibm9uZSI7CiAgICAgICAgYXNrSW5wdXQuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgIH0KICAgIH0KCiAgICAvLyBCbG9jayBGdW5jcwogICAgc2Nyb2xsVmFsdWUoYXJncykgewogICAgICBjb25zdCB0eXBlID0gQ2FzdC50b1N0cmluZyhhcmdzLlRZUEUpOwogICAgICBjb25zdCBpbmRleCA9IHR5cGUuZW5kc1dpdGgoIlgiKSA/IDAgOiAxOwogICAgICBpZiAodHlwZS5zdGFydHNXaXRoKCJkaXN0YW5jZSIpKSByZXR1cm4gbW91c2VEYXRhLnNjcm9sbFtpbmRleF07CiAgICAgIGVsc2UgcmV0dXJuIG1vdXNlRGF0YS5zY3JvbGxWZWxvY2l0eVtpbmRleF07CiAgICB9CgogICAgc2V0U2Nyb2xsRGlzdChhcmdzKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gYXJncy5QT1MgPT09ICJ4IiA/IDAgOiAxOwogICAgICBtb3VzZURhdGEuc2Nyb2xsW2luZGV4XSA9IENhc3QudG9OdW1iZXIoYXJncy5BTVQpOwogICAgfQoKICAgIGNoYW5nZVNjcm9sbERpc3QoYXJncykgewogICAgICBjb25zdCBpbmRleCA9IGFyZ3MuUE9TID09PSAieCIgPyAwIDogMTsKICAgICAgbW91c2VEYXRhLnNjcm9sbFtpbmRleF0gKz0gQ2FzdC50b051bWJlcihhcmdzLkFNVCk7CiAgICB9CgogICAgaXNTY3JvbGxlZChhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuVFlQRSk7CiAgICAgIGNvbnN0IGlzWCA9IHR5cGUgPT09ICJsZWZ0IiB8fCB0eXBlID09PSAicmlnaHQiOwogICAgICBjb25zdCBzY3JvbGxEaXN0ID0gbW91c2VEYXRhLnNjcm9sbFtpc1ggPyAwIDogMV07CiAgICAgIGNvbnN0IHN0YWNrTmFtZSA9IGBTUHNjcm9sbENoZWNrJHtpc1ggPyAiWCIgOiAiWSJ9YDsKCiAgICAgIGlmICh1dGlsLnRocmVhZC5zdGFja0ZyYW1lc1swXVtzdGFja05hbWVdID09PSB1bmRlZmluZWQpIHV0aWwudGhyZWFkLnN0YWNrRnJhbWVzWzBdW3N0YWNrTmFtZV0gPSAwOwogICAgICBjb25zdCB0ZXN0ZXJWYWwgPSB1dGlsLnRocmVhZC5zdGFja0ZyYW1lc1swXVtzdGFja05hbWVdOwoKICAgICAgY29uc3Qgc3RhdHVzID0gdHlwZSA9PT0gImRvd24iIHx8IHR5cGUgPT09ICJsZWZ0IiA/CiAgICAgICAgc2Nyb2xsRGlzdCA+IHRlc3RlclZhbCA6IHNjcm9sbERpc3QgPCB0ZXN0ZXJWYWw7CgogICAgICBpZiAoc3RhdHVzKSB1dGlsLnRocmVhZC5zdGFja0ZyYW1lc1swXVtzdGFja05hbWVdID0gc2Nyb2xsRGlzdDsKICAgICAgcmV0dXJuIENhc3QudG9Cb29sZWFuKHN0YXR1cyk7CiAgICB9CgogICAgbW91c2VDbGljayhhcmdzLCB1dGlsKSB7CiAgICAgIHJldHVybiB1dGlsLmlvUXVlcnkoIm1vdXNlIiwgImdldEJ1dHRvbklzRG93biIsIFtDYXN0LnRvTnVtYmVyKGFyZ3MuQlVUVE9OKV0pCiAgICB9CgogICAgcmVhbE1vdXNlKGFyZ3MpIHsKICAgICAgcmV0dXJuIG1vdXNlRGF0YS5jbGllbnRbYXJncy5QT1MgPT09ICJ4IiA/IDAgOiAxXTsKICAgIH0KCiAgICBtb3VzZVZlbG9jaXR5KGFyZ3MpIHsKICAgICAgcmV0dXJuIG1vdXNlRGF0YS52ZWxvY2l0eVthcmdzLlBPUyA9PT0gIngiID8gMCA6IDFdOwogICAgfQoKICAgIHdoZW5LZXkoYXJncykgewogICAgICBjb25zdCBrZXkgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuS0VZKTsKICAgICAgY29uc3QgaXNIaXQgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuVFlQRSkgPT09ICJoaXQiOwogICAgICByZXR1cm4gdGhpcy5rZXlDaGVja0hhbmRsZXIoa2V5LCBpc0hpdCk7CiAgICB9CgogICAgaXNLZXkoYXJncykgewogICAgICAvLyByZWFsbHkgbm90aGluZyBzcGVjaWFsIGhlcmUKICAgICAgcmV0dXJuIHRoaXMud2hlbktleShhcmdzKTsKICAgIH0KCiAgICBjdXJyZW50S2V5KGFyZ3MpIHsKICAgICAgY29uc3QgdHlwZSA9IENhc3QudG9TdHJpbmcoYXJncy5UWVBFKTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAicHJlc3MiOiByZXR1cm4ga2V5RGF0YS5jdXJLZXk7CiAgICAgICAgY2FzZSAicHJlc3NlZCI6IHJldHVybiBKU09OLnN0cmluZ2lmeShrZXlEYXRhLmtleXMpOwogICAgICAgIGNhc2UgImxhc3RQcmVzcyI6IHJldHVybiBrZXlEYXRhLmxhc3RLZXk7CiAgICAgICAgZGVmYXVsdDogcmV0dXJuICIiOwogICAgICB9CiAgICB9CgogICAgdGltZUtleVByZXNzZWQoYXJncykgewogICAgICBjb25zdCBrZXkgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuS0VZKS50b0xvd2VyQ2FzZSgpOwogICAgICBpZiAoa2V5ID09PSAiYW55IikgcmV0dXJuIE1hdGgubWF4KDAsIC4uLmtleURhdGEua2V5VGltZXJzLnZhbHVlcygpLnRvQXJyYXkoKSk7CiAgICAgIGVsc2UgcmV0dXJuIGtleURhdGEua2V5VGltZXJzLmdldChrZXkpID8/IDA7CiAgICB9CgogICAgc2V0S2V5QmxvY2soYXJncykgewogICAgICBjb25zdCBrZXkgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuS0VZKTsKICAgICAga2V5RGF0YS5rZXlCbG9ja2Vycy5hZGQoa2V5KTsKICAgIH0KCiAgICByZXNldEtleUJsb2NrcygpIHsKICAgICAga2V5RGF0YS5rZXlCbG9ja2Vycy5jbGVhcigpOwogICAgfQoKICAgIGdldEtleUJsb2NrZXJzKCkgewogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoa2V5RGF0YS5rZXlCbG9ja2Vycy52YWx1ZXMoKS50b0FycmF5KCkpOwogICAgfQoKICAgIHNwcml0ZVBvaW50aW5nKGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoYXJncy5TUFJJVEUxLCB1dGlsLCBmYWxzZSwgdHJ1ZSk7CiAgICAgIGlmICghdGFyZ2V0KSByZXR1cm4gZmFsc2U7CiAgICAgIGNvbnN0IG9sZERpciA9IHRhcmdldC5kaXJlY3Rpb247CiAgICAgIHJ1bnRpbWUuZXh0X3NjcmF0Y2gzX21vdGlvbi5wb2ludFRvd2FyZHMoeyBUT1dBUkRTOiBhcmdzLlNQUklURTIgfSwgeyAuLi51dGlsLCB0YXJnZXQsIGlvUXVlcnk6IHV0aWwuaW9RdWVyeSB9KTsKICAgICAgY29uc3QgbmV3RGlyID0gdGFyZ2V0LmRpcmVjdGlvbjsKICAgICAgdGFyZ2V0LnNldERpcmVjdGlvbihvbGREaXIpOwogICAgICByZXR1cm4gTWF0aC5yb3VuZChuZXdEaXIpID09PSBNYXRoLnJvdW5kKG9sZERpcik7CiAgICB9CgogICAgc3ByaXRlVG91Y2hpbmdTcHJpdGUoYXJncywgdXRpbCkgewogICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmdldFRhcmdldChhcmdzLlNQUklURTIsIHV0aWwsIGZhbHNlLCB0cnVlKTsKICAgICAgaWYgKCF0YXJnZXQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRhcmdldC5zcHJpdGUuY2xvbmVzLnNvbWUoKHQpID0+IHQuaXNUb3VjaGluZ09iamVjdChhcmdzLlNQUklURTEpKTsKICAgIH0KCiAgICBzcHJpdGVUb3VjaGluZ1Nwcml0ZVR5cGUoYXJncywgdXRpbCkgewogICAgICBjb25zdCB0YXJnZXQxID0gdGhpcy5nZXRUYXJnZXQoYXJncy5TUFJJVEUxLCB1dGlsLCB0cnVlLCB0cnVlKTsKICAgICAgY29uc3QgdGFyZ2V0MiA9IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKGFyZ3MuU1BSSVRFMik7CiAgICAgIGlmICghdGFyZ2V0MSB8fCAhdGFyZ2V0MikgcmV0dXJuIGZhbHNlOwogICAgICBpZiAoYXJncy5UWVBFID09PSAicGFyZW50IikgewogICAgICAgIGlmICh0YXJnZXQxID09PSAiX21vdXNlXyIpIHJldHVybiB0YXJnZXQyLmlzVG91Y2hpbmdPYmplY3QoIl9tb3VzZV8iKTsKICAgICAgICBlbHNlIHJldHVybiByZW5kZXIuaXNUb3VjaGluZ0RyYXdhYmxlcyh0YXJnZXQxLmRyYXdhYmxlSUQsIFt0YXJnZXQyLmRyYXdhYmxlSURdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBjbG9uZXMgPSB0YXJnZXQyLnNwcml0ZS5jbG9uZXM7CiAgICAgICAgaWYgKHRhcmdldDEgPT09ICJfbW91c2VfIikgcmV0dXJuIGNsb25lcy5zb21lKChjKSA9PiAhYy5pc09yaWdpbmFsICYmIGMuaXNUb3VjaGluZ09iamVjdCgiX21vdXNlXyIpKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGNvbnN0IGNsb25lSWRzID0gW107CiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNsb25lcy5sZW5ndGg7IGkrKykgY2xvbmVJZHMucHVzaChjbG9uZXNbaV0uZHJhd2FibGVJRCk7CiAgICAgICAgICByZXR1cm4gcmVuZGVyLmlzVG91Y2hpbmdEcmF3YWJsZXModGFyZ2V0MS5kcmF3YWJsZUlELCBjbG9uZUlkcyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3ByaXRlVG91Y2hpbmdDbG9uZShhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHRhcmdldDEgPSB0aGlzLmdldFRhcmdldChhcmdzLlNQUklURTEsIHV0aWwsIHRydWUsIHRydWUpOwogICAgICBjb25zdCB0YXJnZXQyID0gcnVudGltZS5nZXRTcHJpdGVUYXJnZXRCeU5hbWUoYXJncy5TUFJJVEUyKTsKICAgICAgaWYgKCF0YXJnZXQxIHx8ICF0YXJnZXQyKSByZXR1cm4gZmFsc2U7CgogICAgICBjb25zdCBjbG9uZXMgPSB0YXJnZXQyLnNwcml0ZS5jbG9uZXM7CiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY2xvbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdmFyaWFibGUgPSBjbG9uZXNbaV0ubG9va3VwVmFyaWFibGVCeU5hbWVBbmRUeXBlKGFyZ3MuVkFSLCAiIiwgY2xvbmVzW2ldKTsKICAgICAgICBpZiAodmFyaWFibGUgJiYgQ2FzdC50b1N0cmluZyh2YXJpYWJsZS52YWx1ZSkgPT09IENhc3QudG9TdHJpbmcoYXJncy5WQUwpKSB7CiAgICAgICAgICBpZiAodGFyZ2V0MSA9PT0gIl9tb3VzZV8iKSB7CiAgICAgICAgICAgIGlmIChjbG9uZXNbaV0uaXNUb3VjaGluZ09iamVjdCgiX21vdXNlXyIpKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChyZW5kZXIuaXNUb3VjaGluZ0RyYXdhYmxlcyh0YXJnZXQxLmRyYXdhYmxlSUQsIFtjbG9uZXNbaV0uZHJhd2FibGVJRF0pKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHNwcml0ZXNUb3VjaGluZyhhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IGxpc3QgPSBbXTsKICAgICAgY29uc3QgdGhpc1Nwcml0ZSA9IHRoaXMuZ2V0VGFyZ2V0KGFyZ3MuU1BSSVRFLCB1dGlsLCB0cnVlLCB0cnVlKTsKICAgICAgaWYgKCF0aGlzU3ByaXRlKSByZXR1cm4gIltdIjsKICAgICAgY29uc3QgdGFyZ2V0cyA9IHJ1bnRpbWUudGFyZ2V0czsKICAgICAgaWYgKHRoaXNTcHJpdGUgPT09ICJfbW91c2VfIikgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1tpXTsKICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHt0YXJnZXQuZ2V0TmFtZSgpfSR7dGFyZ2V0LmlzT3JpZ2luYWwgPyAiIiA6ICIgKENsb25lKSJ9YDsKICAgICAgICAgIGlmICh0YXJnZXQuaXNUb3VjaGluZ09iamVjdCh0aGlzU3ByaXRlKSkgbGlzdC5wdXNoKG5hbWUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaV07CiAgICAgICAgICBpZiAodGFyZ2V0LmlkID09PSB0aGlzU3ByaXRlLmlkKSBjb250aW51ZTsKCiAgICAgICAgICBjb25zdCBuYW1lID0gYCR7dGFyZ2V0LmdldE5hbWUoKX0ke3RhcmdldC5pc09yaWdpbmFsID8gIiIgOiAiIChDbG9uZSkifWA7CiAgICAgICAgICBpZiAocmVuZGVyLmlzVG91Y2hpbmdEcmF3YWJsZXModGhpc1Nwcml0ZS5kcmF3YWJsZUlELCBbdGFyZ2V0LmRyYXdhYmxlSURdKSkgbGlzdC5wdXNoKG5hbWUpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobGlzdCk7CiAgICB9CgogICAgZ2V0TmVpZ2hib3JzKGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgY2lyYyA9IENhc3QudG9OdW1iZXIoYXJncy5ESUFNRVRFUik7CiAgICAgIGxldCBsaXN0ID0gW10sIHBvcyA9IFtdOwogICAgICBpZiAoYXJncy5TUFJJVEUgPT09ICJfbW91c2VfIikgcG9zID0gW3V0aWwuaW9RdWVyeSgibW91c2UiLCAiZ2V0U2NyYXRjaFgiKSwgdXRpbC5pb1F1ZXJ5KCJtb3VzZSIsICJnZXRTY3JhdGNoWSIpLCAiIl07CiAgICAgIGVsc2UgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBwb3MgPSBbdXRpbC50YXJnZXQueCwgdXRpbC50YXJnZXQueSwgdXRpbC50YXJnZXQuaWRdOwogICAgICBlbHNlIHsKICAgICAgICBjb25zdCBuYW1lVGFyZ2V0ID0gcnVudGltZS5nZXRTcHJpdGVUYXJnZXRCeU5hbWUoYXJncy5TUFJJVEUpOwogICAgICAgIGlmICghbmFtZVRhcmdldCkgcmV0dXJuICJbXSI7CiAgICAgICAgcG9zID0gW25hbWVUYXJnZXQueCwgbmFtZVRhcmdldC55LCBuYW1lVGFyZ2V0LmlkXTsKICAgICAgfQogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2ldOwogICAgICAgIGNvbnN0IGR4ID0gcG9zWzBdIC0gdGFyZ2V0Lng7CiAgICAgICAgY29uc3QgZHkgPSBwb3NbMV0gLSB0YXJnZXQueTsKICAgICAgICBpZiAoTWF0aC5zcXJ0KChkeCAqIGR4KSArIChkeSAqIGR5KSkgPD0gY2lyYyAmJiB0YXJnZXQuaWQgIT09IHBvc1syXSkgbGlzdC5wdXNoKGAke3RhcmdldC5nZXROYW1lKCl9JHt0YXJnZXQuaXNPcmlnaW5hbCA/ICIiIDogIiAoQ2xvbmUpIn1gKTsKICAgICAgfQogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobGlzdCk7CiAgICB9CgogICAgY29sb3JBdFBvc2l0aW9uKGFyZ3MpIHsgcmV0dXJuIHRoaXMuY29sb3JBdFBvcyhDYXN0LnRvTnVtYmVyKGFyZ3MueCksIENhc3QudG9OdW1iZXIoYXJncy55KSkgfQogICAgb2JqVG91Y2hpbmdDb2xvcihhcmdzLCB1dGlsKSB7CiAgICAgIGlmIChhcmdzLlNQUklURSA9PT0gIl9tb3VzZV8iKSByZXR1cm4gdGhpcy5jb2xvckF0UG9zKHV0aWwuaW9RdWVyeSgibW91c2UiLCAiZ2V0U2NyYXRjaFgiKSwgdXRpbC5pb1F1ZXJ5KCJtb3VzZSIsICJnZXRTY3JhdGNoWSIpKTsKICAgICAgZWxzZSB7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoYXJncy5TUFJJVEUsIHV0aWwsIGZhbHNlLCB0cnVlKTsKICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuICIiOwogICAgICAgIGNvbnN0IHdhc1Zpc2libGUgPSB0YXJnZXQudmlzaWJsZTsKICAgICAgICB0YXJnZXQuc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgY29uc3QgaGV4ID0gdGhpcy5jb2xvckF0UG9zKHRhcmdldC54LCB0YXJnZXQueSk7CiAgICAgICAgdGFyZ2V0LnNldFZpc2libGUod2FzVmlzaWJsZSk7CiAgICAgICAgcmV0dXJuIGhleDsKICAgICAgfQogICAgfQoKICAgIHNwcml0ZURyYWdNb2RlKGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoYXJncy5TUFJJVEUsIHV0aWwsIGZhbHNlLCB0cnVlKTsKICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0LnNldERyYWdnYWJsZShhcmdzLkRSQUcgPT09ICJkcmFnZ2FibGUiKTsKICAgIH0KICAgIHNwcml0ZURyYWdnYWJsZShhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KGFyZ3MuU1BSSVRFLCB1dGlsLCBmYWxzZSwgdHJ1ZSk7CiAgICAgIGlmICh0YXJnZXQpIHJldHVybiB0YXJnZXRbYXJncy5EUkFHID09PSAiZHJhZ2dhYmxlIiA/ICJkcmFnZ2FibGUiIDogImRyYWdnaW5nIl07CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBhZHZhbmNlZEFzayhhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IHdhc1Zpc2libGUgPSB1dGlsLnRhcmdldC52aXNpYmxlOwogICAgICBpZiAoIXV0aWwudGFyZ2V0LmlzU3RhZ2UgJiYgYXJncy5UWVBFID09PSAic3RhZ2UiKSB1dGlsLnRhcmdldC5zZXRWaXNpYmxlKGZhbHNlKTsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICBzZW5zaW5nQ29yZS5hc2tBbmRXYWl0KGFyZ3MsIHV0aWwpOwogICAgICAgIGlmICghdXRpbC50YXJnZXQuaXNTdGFnZSAmJiB3YXNWaXNpYmxlKSB1dGlsLnRhcmdldC5zZXRWaXNpYmxlKHRydWUpOwogICAgICAgIHRoaXMudXBkYXRlQXNrTW9uaXRvcigpOwoKICAgICAgICBpZiAoYXJncy5XQUlUID09PSAiY29udGludWUiKSByZXNvbHZlKCk7CiAgICAgICAgZWxzZSBydW50aW1lLm9uY2UoIkFOU1dFUiIsICgpID0+IHJlc29sdmUoKSk7CiAgICAgIH0pOwogICAgfQoKICAgIGFza1JlcG9ydGVyKGFyZ3MsIHV0aWwpIHsKICAgICAgcmV0dXJuIHRoaXMuYWR2YW5jZWRBc2soYXJncywgdXRpbCkudGhlbigoKSA9PiB7IHJldHVybiBzZW5zaW5nQ29yZS5nZXRBbnN3ZXIoKSB9KTsKICAgIH0KCiAgICBzdG9wQXNraW5nKCkgewogICAgICBydW50aW1lLmVtaXQoIkFOU1dFUiIsIHRoaXMuY3VycmVudFR5cGVkKCkpOwogICAgICBydW50aW1lLmVtaXQoIlFVRVNUSU9OIiwgbnVsbCk7CiAgICB9CgogICAgY3VycmVudFR5cGVkKCkgewogICAgICBsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihpc1BhY2thZ2VkID8gYGlucHV0W2NsYXNzPSJzYy1xdWVzdGlvbi1pbnB1dCJdYCA6IGBkaXZbY2xhc3MqPSJxdWVzdGlvbiJdIFtjbGFzc149ImlucHV0X2lucHV0LWZvcm0iXWApOwogICAgICByZXR1cm4gYm94ID8gYm94LnZhbHVlIDogIiI7CiAgICB9CgogICAgaXNBc2tpbmcoKSB7IHJldHVybiBDYXN0LnRvQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbY2xhc3MqPSJxdWVzdGlvbi1pbnB1dCJdYCkpIH0KCiAgICBzZXRBc2tEaXNwbGF5KGFyZ3MpIHsKICAgICAgYXNrQm94U2V0dGluZ3Mud2lkdGggPSBDYXN0LnRvTnVtYmVyKGFyZ3Mud2lkdGgpOwogICAgICBpZiAoYXNrQm94U2V0dGluZ3Mud2lkdGggPCAwKSBhc2tCb3hTZXR0aW5ncy53aWR0aCA9IHVuZGVmaW5lZDsKCiAgICAgIGFza0JveFNldHRpbmdzLnggPSBDYXN0LnRvTnVtYmVyKGFyZ3MueCk7CiAgICAgIGFza0JveFNldHRpbmdzLnkgPSBpc05hTihhcmdzLnkpID8gdW5kZWZpbmVkIDogQ2FzdC50b051bWJlcihhcmdzLnkpICogLTE7CiAgICAgIGlmIChpc05hTihhcmdzLnkpKSBhc2tCb3hTZXR0aW5ncy55ID0gdW5kZWZpbmVkOwogICAgICB0aGlzLnVwZGF0ZUFza01vbml0b3IoKTsKICAgIH0KCiAgICBzZXRBc2tUeXBlKGFyZ3MpIHsKICAgICAgY29uc3QgaW5wdXRUeXBlID0gQ2FzdC50b1N0cmluZyhhcmdzLlRZUEUpOwogICAgICBhc2tCb3hTZXR0aW5ncy5pbnB1dCA9IHsKICAgICAgICB0eXBlOiB2YWxpZElucHV0cy5maW5kKChpKSA9PiBpLnZhbHVlID09PSBpbnB1dFR5cGUpID8gaW5wdXRUeXBlIDogInRleHQiLAogICAgICAgIHZhbHVlOiBhcmdzLlRFWFQKICAgICAgfTsKICAgICAgdGhpcy51cGRhdGVBc2tNb25pdG9yKCk7CiAgICB9CgogICAgc2V0QXNrTGlzdChhcmdzKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYXJyYXkgPSBKU09OLnBhcnNlKGFyZ3MuTElTVCk7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyYXkpICYmIGFycmF5Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIGFza0JveFNldHRpbmdzLmlucHV0ID0geyB0eXBlOiAiZHJvcGRvd24iLCB2YWx1ZTogYXJyYXkgfTsKICAgICAgICAgIHRoaXMudXBkYXRlQXNrTW9uaXRvcigpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCB7fQogICAgfQoKICAgIGlzU2NyZWVuKGFyZ3MpIHsKICAgICAgY29uc3QgdmFsdWVzID0gW3JlbmRlci5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsIHJ1bnRpbWUuc3RhZ2VXaWR0aF07CiAgICAgIHJldHVybiBhcmdzLlNDUkVFTiA9PT0gImZ1bGxzY3JlZW4iID8gdmFsdWVzWzBdID4gdmFsdWVzWzFdIDogdmFsdWVzWzBdIDwgdmFsdWVzWzFdOwogICAgfQoKICAgIHNjcmVlbk9mZihhcmdzKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBDYXN0LnRvU3RyaW5nKGFyZ3MuVFlQRSk7CiAgICAgIGNvbnN0IGNhbnZhc0JvdW5kcyA9IHR5cGUuc3RhcnRzV2l0aCgiZGlzcGxheSIpIHx8IHR5cGUgPT09ICJyYXRpbyIgPwogICAgICAgIHJlbmRlci5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiB7fTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAid2lkdGgiOiByZXR1cm4gcnVudGltZS5zdGFnZVdpZHRoOwogICAgICAgIGNhc2UgImhlaWdodCI6IHJldHVybiBydW50aW1lLnN0YWdlSGVpZ2h0OwogICAgICAgIGNhc2UgImRpc3BsYXkgd2lkdGgiOiByZXR1cm4gY2FudmFzQm91bmRzLndpZHRoOwogICAgICAgIGNhc2UgImRpc3BsYXkgaGVpZ2h0IjogcmV0dXJuIGNhbnZhc0JvdW5kcy5oZWlnaHQ7CiAgICAgICAgY2FzZSAicmF0aW8iOiByZXR1cm4gY2FudmFzQm91bmRzLndpZHRoIC8gcnVudGltZS5zdGFnZVdpZHRoOwogICAgICAgIGRlZmF1bHQ6IHJldHVybiAwOwogICAgICB9CiAgICB9CgogICAgYXZlcmFnZU1pY1ZvbHVtZSgpIHsKICAgICAgaWYgKGxvdWRuZXNzQ2FjaGUubGVuZ3RoID49IDMwKSBsb3VkbmVzc0NhY2hlID0gW107CiAgICAgIGxvdWRuZXNzQ2FjaGUucHVzaChzZW5zaW5nQ29yZS5nZXRMb3VkbmVzcygpKTsKICAgICAgbGV0IHN1bSA9IGxvdWRuZXNzQ2FjaGUucmVkdWNlKChhY2N1bXVsYXRvciwgY3VyVmFsdWUpID0+IGFjY3VtdWxhdG9yICsgY3VyVmFsdWUsIDApOwogICAgICByZXR1cm4gTWF0aC5yb3VuZCgoc3VtIC8gbG91ZG5lc3NDYWNoZS5sZW5ndGgpICogMTAwKSAvIDEwMDsKICAgIH0KCiAgICBnZXRTcHJpdGVOYW1lKF8sIHV0aWwpIHsgcmV0dXJuIHV0aWwudGFyZ2V0LmdldE5hbWUoKSB9CgogICAgYWxsTGF5ZXJzKCkgeyByZXR1cm4gcmVuZGVyLl9kcmF3TGlzdC5sZW5ndGggLSAxIH0KCiAgICBib29sZWFuKGFyZ3MpIHsKICAgICAgcmV0dXJuIENhc3QudG9Cb29sZWFuKGFyZ3MuU1RSSU5HKSAmJiBhcmdzLlNUUklORyAhPT0gdW5kZWZpbmVkOwogICAgfQoKICAgIGdldEFsbFN0cmluZyhhcmdzKSB7CiAgICAgIGxldCByZWdleDsKICAgICAgc3dpdGNoIChhcmdzLlRFWFQpIHsKICAgICAgICBjYXNlICJudW1iZXJzIjoge3JlZ2V4ID0gL1teMC05XS9nOyBicmVhayB9CiAgICAgICAgY2FzZSAic3BlY2lhbCBjaGFyYWN0ZXJzIjoge3JlZ2V4ID0gL1tBLVphLXowLTldL2c7IGJyZWFrIH0KICAgICAgICBkZWZhdWx0OiByZWdleCA9IC9bXkEtWmEtel0vZzsKICAgICAgfQogICAgICByZXR1cm4gQ2FzdC50b1N0cmluZyhhcmdzLlNUUklORykucmVwbGFjZShyZWdleCwgIiIpOwogICAgfQogIH0KCiAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBIeXBlclNlbnNlMlNQKCkpOwp9KShTY3JhdGNoKTsK","pointerlock":"https://extensions.turbowarp.org/pointerlock.js","text":"https://extensions.turbowarp.org/lab/text.js"},"customFonts":[{"system":false,"family":"Ezydraw","fallback":"Sans Serif","md5ext":"6e2171e0166fe95b2939433bc47a3bd1.ttf"}],"meta":{"semver":"3.0.0","platform":{"name":"TurboWarp","url":"https://turbowarp.org/"}}}